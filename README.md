# Проектная работа 3 спринта

## Spring Web MVC приложение My Blog

### Технологии

```
Java 21
Spring Framework 6.2.8 (без Spring Boot)
PostgreSQL 16.9
Apache Tomcat 10
Maven
Testcontainers
Docker & Docker Compose
```

### Требования к окружению

```
Docker Desktop
Maven
JDK 21
Клонировать репозиторий: https://github.com/ksa-git-01/middle-java-sprint-3.git
```

### Запуск тестов

```
# из корня проекта:
mvn clean test
```

### Сборка и запуск

```
# из корня проекта:
docker-compose up

# Используются порты: 18080 и 15432
# если порты уже заняты в системе, то можно переопределить их в файле docker-compose.yml
```

### Ресурсы проекта

```
Веб-страницы:
Лента постов: http://localhost:18080/posts
Просмотр поста: http://localhost:18080/posts/{postId}
Создание поста: http://localhost:18080/posts/add

Эндпоинты:
DELETE /comments/{commentId} - удаление комментария
PUT /comments/{commentId} - обновление содержимого комментария

GET /images/{filename} - получить файл изображения поста

GET /posts?page=&size=&tag= - получить список постов
GET /posts/add - отобразить форму создания поста
GET /posts/{postId}/edit - отобразить форму редактирования поста
POST /posts?title=&content=&tags=&image= - создать новый пост
PUT /posts/{postId}?title=&content=&tags=&image= - обновить существующий пост
GET /posts/{postId} - получить детальную информацию о посте
DELETE /posts/{postId} - удалить пост
POST /posts/{postId}/comment - добавить комментарий к посту
POST /posts/{postId}/like - добавить лайк к посту
```

### Примечания по реализации

```
1. Хранение изображений постов реализовано в файловой системе (используется volume docker контейнера)
В реальном приложении скорее всего использовалось бы S3 совместимое хранилище
2. Пагинация страницы с лентой постов реализована по упрощенной логике:
Если кол-во постов, которые вернул эндпоинт, равно запрашиваемому кол-ву постов на странице, 
то активируется кнопка "Вперед"
Клиент не знает о том, сколько всего постов есть в системе и сколько страниц впереди.
Если параметр page > 0, то активируется кнопка "Назад"
3. При запуске приложения прогоняется скрипт, который генерирует демонстрационный набор данных, 
но без картинок
4. Для модели данных СУБД создана ER-диаграмма в PlantUML. В гитхабе настроен action, 
который генерирует png картинку на основе кода диаграмы. 
Action срабатывает при коммите изменений файла с кодом диаграммы
5. HTML практически полностью сгенерирован ИИ в качестве эксперимента 
```

### ER-диаграма:

![](/src/main/diagrams/generated/er-diagram.png)